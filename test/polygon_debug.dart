import 'package:web_polymask/math/polygon.dart';
import 'package:web_polymask/math/polygon_state.dart';
import 'package:web_polymask/math/polymath.dart';

import 'test_helpers.dart';

void main() {
  final state = parseState('''
- (positive, 208,310 232,268 228,268 236,254 231,254 239,240 236,240 244,226 241,226 248,213 256,199 254,199 297,124 298,125 305,112 306,114 314,101 317,106 325,92 329,98 337,84 342,92 350,78 356,88 364,73 370,83 378,69 384,79 392,65 399,77 407,62 414,75 422,61 429,74 437,60 445,73 452,60 460,73 467,60 476,75 484,60 492,74 499,61 507,76 514,64 522,78 528,68 536,82 542,71 550,85 556,75 565,90 570,81 578,95 583,87 592,102 596,95 605,111 609,104 617,118 620,113 629,128 631,124 639,139 641,136 684,211 691,224 690,224 697,237 694,237 702,251 697,251 705,265 698,265 707,280 700,280 709,295 700,295 709,310 701,310 710,325 701,325 710,340 701,340 710,355 699,355 708,370 697,370 705,384 693,384 701,398 688,398 696,412 681,412 689,426 674,426 682,440 663,440 672,455 655,455 662,468 645,468 651,479 633,479 640,491 621,491 627,502 607,502 612,510 574,510 583,525 563,525 566,530 545,530 547,533 527,533 528,534 396,534 398,530 368,530 370,526 338,526 341,520 305,520 307,516 279,516 281,512 256,512 259,507 242,507 247,498 231,498 238,485 223,485 231,471 217,471 227,454 211,454 224,432 205,432 214,416 201,416 210,401 201,401 210,385 201,385 210,370 202,370 211,355 204,355 213,340 206,340 215,325 208,325 217,310)
  - (negative, 227,381 249,342 248,342 256,328 251,328 260,313 253,313 261,299 256,299 265,284 258,284 266,270 262,270 270,256 265,256 273,242 268,242 282,216 325,141 326,143 334,130 337,135 345,121 350,129 358,115 364,125 372,110 378,120 386,105 392,116 400,102 407,115 415,101 423,114 430,101 438,115 445,102 453,116 459,105 467,119 473,109 481,123 487,113 495,127 500,119 509,134 513,126 521,140 526,132 535,147 539,139 548,154 552,146 560,160 563,155 572,170 574,166 582,180 583,178 590,191 591,190 599,203 606,216 607,215 614,228 615,227 658,302 655,302 663,316 658,316 666,330 658,330 667,345 658,345 667,360 654,360 662,374 649,374 656,387 641,387 647,398 632,398 638,409 622,409 628,420 610,420 615,428 599,428 602,434 586,434 588,437 572,437 574,440 558,440 559,441 365,441 366,440 349,440 350,438 334,438 335,436 319,436 320,434 304,434 306,431 290,431 293,426 275,426 278,420 261,420 264,414 247,414 252,406 234,406 240,395 224,395 232,381)
    - (positive, 587,348 589,345 585,345)
    - (positive, 387,346 403,346 401,349 418,349 417,351 518,351 517,350 533,350 531,346 547,346 540,334 555,334 512,259 510,262 502,248 500,252 491,237 487,243 479,229 475,237 466,222 460,232 452,217 445,229 437,215 430,228 422,215 413,230 409,222 366,297 399,297 375,339 366,323 359,335 351,321 345,331 337,317 334,323 328,313 339,313 331,299 342,299 333,284 344,284 336,270 348,270 340,256 351,256 343,242 354,242 347,229 361,229 354,216 368,216 362,205 377,205 372,196 388,196 385,190 401,190 398,185 415,185 412,180 432,180 430,184 446,184 444,188 460,188 457,194 474,194 470,201 486,201 483,207 500,207 496,214 513,214 509,221 525,221 520,230 537,230 531,241 547,241 540,253 555,253 548,265 563,265 556,278 571,278 564,290 579,290 572,302 585,302 577,316 588,316 580,330 590,330 581,345 585,345 576,360 572,353 564,367 559,359 551,373 545,362 537,376 531,365 523,379 516,366 509,379 501,366 494,379 486,366 478,380 470,366 463,379 455,366 447,380 439,366 431,380 423,366 416,379 408,366 400,379 392,365 391,367 377,343 389,343)
    - (positive, 475,247 518,322 491,322 492,323 406,323 449,248 462,270)
''');

  final polygon = Polygon(points: parse('362,295 405,370 319,370'));

  final pstate = PolygonState.assignParents(state);
  final merger = PolygonMerger();
  merger.mergePolygon(pstate, polygon);
  print(pstate);
  print(pstate.isValid());
}
