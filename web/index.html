<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="scaffolded-by" content="https://github.com/dart-lang/stagehand">
  <title>Polymask Example</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.ico">
  <script defer src="main.dart.js"></script>
</head>

<body>
  <h1>Polymask Example</h1>

  <p>
    Because this mini project was created for the sole reason of getting merged into Dungeon Club,
    here's a battle map I yoinked off the internet.
  </p>
  <p>
    You can either <b>click to create single points</b> of a polygon or <b>hold to draw continuous shapes</b>.
  </p>
  <p>
    <b>Hold shift to make negative polygons</b> (AKA holes).
  </p>

  <div id="container">
    <img src="https://2minutetabletop.com/wp-content/uploads/2020/03/Dungeon-Jail-22x16-Base-Map-Light.jpg">

    <svg>
      <defs>
        <pattern id="pattern" width="21" height="10" patternUnits="userSpaceOnUse" patternTransform="rotate(45 50 50)">
          <rect fill="#1112"></rect>
          <line stroke="#fb8b" stroke-width="20px" y2="10" />
          <animateTransform attributeType="xml" attributeName="patternTransform" type="translate" from="0" to="21"
            dur="3s" repeatCount="indefinite" additive="sum" />
        </pattern>

        <g id="polyneg" polycopy="n"></g>

        <mask id="polynegmask" fill="black" polycopy="n" polydeep>
          <rect fill="white"></rect>
          <use href="#polyneg" polyattr="href"></use>
        </mask>
      </defs>

      <g id="polypos" class="polypattern" mask="url(#polynegmask)" polycopy="p" polyattr="mask"></g>

      <g id="polynegdisplay">
        <use href="#polyneg" polycopy="n" polyattr="href"></use>
      </g>

      <polygon id="polyprev"></polygon>
    </svg>
  </div>
</body>

</html>