<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="scaffolded-by" content="https://github.com/dart-lang/stagehand">
  <title>Polymask Example</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.ico">
  <script defer src="main.dart.js"></script>
</head>

<body>
  <h1>Polymask Example</h1>

  <p>
    Because this mini project was created for the sole reason of getting merged into D&D Interactive,
    here's a dungeon map I yoinked off the internet.
  </p>
  <p>
    You can either <b>click to create single points</b> of a polygon or <b>hold to draw continuous shapes</b>.
  </p>
  <p>
    <b>Hold shift to make negative polygons</b> (AKA holes).
  </p>

  <div id="container">
    <img
      src="https://mk0a2minutetabl7hq7i.kinstacdn.com/wp-content/uploads/2020/03/Dungeon-Jail-Prison-Battle-Map-Banner-1024x454.jpg">

    <svg>
      <defs>
        <pattern id="pattern" width="21" height="10" patternUnits="userSpaceOnUse" patternTransform="rotate(45 50 50)">
          <line stroke="#fb88" stroke-width="20px" y2="10" />
          <animateTransform attributeType="xml" attributeName="patternTransform" type="translate" from="0" to="21"
            dur="3s" repeatCount="indefinite" additive="sum" />
        </pattern>

        <filter id="outline">
          <feMorphology operator="dilate" radius="2" in="SourceGraphic" result="THICKNESS" />
          <feComposite operator="out" in="THICKNESS" in2="SourceGraphic"></feComposite>
        </filter>
      </defs>

      <g filter="url(#outline)">
        <rect class="barrier" width="100%" height="100%" fill="#fb8" />
      </g>
      <rect class="barrier" width="100%" height="100%" fill="url(#pattern)" />
    </svg>
  </div>
</body>

</html>